{"name":"Extrawork","tagline":"ExtraWork.dll template for PvPGN","body":"### ExtraWork\r\nExtraWork is used to send DLL files to Battle.net clients for execution.\r\nThere are two types of ExtraWork: [SID_REQUIREDWORK](https://bnetdocs.org/?op=packet&pid=182) and [SID_OPTIONALWORK](https://bnetdocs.org/?op=packet&pid=102).\r\nBlizzard has generally used this module to run hack detection/prevention code or collect system data for future use. It is not regularly used and Battle.net servers no longer uses this module.\r\n### SID_REQUIREDWORK\r\nThe server sends packet [0x4C](https://bnetdocs.org/?op=packet&pid=182) to the client containing the MPQ's filename, often named **IX86ExtraWork.mpq**, to download. In response, the client will send packet [0x33](https://bnetdocs.org/?op=packet&pid=382) to the server with Request ID **0x80000006** for the filetime of the filename previously received.\r\nThe client will check **bncache.dat** on the user's computer for the same file and download a new copy from the server via [BNFTP](https://bnetdocs.org/?op=doc&did=5) if the file does not exist or the filetime does not match.\r\nInside the MPQ file, there is a DLL file with the same filename but the file extension is _.dll_. The client will extract the DLL file and call an exported function called _ExtraWork_.\r\n### SID_OPTIONALWORK\r\n_SID_OPTIONALWORK_ behaves similarly to SID_REQUIREDWORK with the exception that downloading the MPQ file from the server is completely optional and the Request ID is **0x80000005**.\r\nTo toggle whether or not the client should download the MPQ file, the registry key **HKEY_CURRENT_USER\\Software\\Battle.net\\Optimize\\SysDesc**(REG_DWORD) must be modified. A value of 0 will make the client _not_ download the specified MPQ file and vice versa with any non-zero value.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}